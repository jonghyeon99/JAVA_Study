package com.dsa.service;

import java.util.*;

import com.dsa.vo.Score;
import com.dsa.vo.Student;

public class Academy_Service {

	private TreeSet<Student> studentList;
	private Scanner scan;
	
	public Academy_Service() {
		studentList = new TreeSet<>();
		scan = new Scanner(System.in);
		
		while (true) {
			mainMenu();
			
			int num = scan.nextInt();
			
			switch (num) {
				case 1 -> insertStudent();
				case 2 -> insertScore();
				case 3 -> selectStudent();
				case 4 -> selectScore();
				case 5 -> selectRank();
				case 0 -> System.exit(0);
			}
		}
	}
	
	// ---------------------------------------------------
	
	// ë©”ì¸ë©”ë‰´
	public void mainMenu() {
		System.out.println();
		System.out.println("[ DSA_ACADEMY ]");
		System.out.println("1. í•™ìƒ ë“±ë¡");
		System.out.println("2. ì„±ì  ìˆ˜ì •");
		System.out.println("3. í•™ìƒ ì¡°íšŒ");
		System.out.println("4. ì„±ì  ì¡°íšŒ");
		System.out.println("5. ìˆœìœ„ ì¡°íšŒ");
		System.out.println("0. í”„ë¡œê·¸ë¨ ì¢…ë£Œ");
		System.out.print("ì„ íƒ > ");
	}
	
	// í•™ìƒë“±ë¡
	public void insertStudent() {
		System.out.println("\n[ í•™ìƒë“±ë¡ ]");
		System.out.print("ì´ë¦„ ì…ë ¥ > ");
		String name = scan.next();
		int java = 0, db = 0, web = 0;
		
		//code ì‘ì„±
		System.out.print("*Java : ");
		java = scan.nextInt();
		System.out.print("*DB : ");
		db = scan.nextInt();
		System.out.print("*WEB : ");
		web = scan.nextInt();

		if (java > 100 || java < 0 || db > 100 || db < 0 || web > 100 || web < 0) {
			System.out.println("ì ìˆ˜ëŠ” 0~100ì  ì´ë‚´ë¡œ ì…ë ¥í•˜ì„¸ìš”.");
			return;
		}
		Score score = new Score(java, db, web);
		Student student = new Student(name, score);
		studentList.add(student);
		System.out.println("ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
	}
	
	// ì„±ì ìˆ˜ì •
	public void insertScore() {
		System.out.println("\n[ ì„±ì ìˆ˜ì • ]");
		System.out.print("í•™ë²ˆ ì…ë ¥ > ");
		int stdNum = scan.nextInt();

		//code ì‘ì„±
		for (Student student : studentList) {
			if (student.getStdNum() == stdNum) {
				System.out.println("*Java : " + student.getScore().getJava());
				System.out.println("*DB : " + student.getScore().getDatabase());
				System.out.println("*WEB : " + student.getScore().getWeb());

				System.out.print("*Java : ");
				int java = scan.nextInt();
				System.out.print("*DB : ");
				int db = scan.nextInt();
				System.out.print("*WEB : ");
				int web = scan.nextInt();

				if (java <= 100 && java >= 0 && db <= 100 && db >= 0 && web <= 100 && web >= 0) {
					Score score = new Score(java, db, web);
					student.setScore(score);
					System.out.println("ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
				} else {
					System.out.println("ì ìˆ˜ëŠ” 0~100ì  ì´ë‚´ë¡œ ì…ë ¥í•˜ì„¸ìš”.");
				}
			} else {
				System.out.println("í•™ìƒì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
				return;
			}
		}
	}
	
	// í•™ìƒì¡°íšŒ
	public void selectStudent() {
		System.out.println("\n[ í•™ìƒì¡°íšŒ ]");
		System.out.print("ì´ë¦„ ì…ë ¥ > ");
		String name = scan.next();
		
		//code ì‘ì„±
		for (Student student : studentList) {
			if (student.getName() == name) {
				student.toString();
			} else {
				System.out.println("í•™ìƒì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
				return;
			}
		}
	}
	
	// ì„±ì ì¡°íšŒ
	public void selectScore() {
		System.out.println("\n[ ì„±ì ì¡°íšŒ ]");
		System.out.print("í•™ë²ˆ ì…ë ¥ > ");
		int stdNum = scan.nextInt();
		
		//code ì‘ì„±
		for (Student student : studentList) {
			if (student.getStdNum() == stdNum) {
				Score score = student.getScore();
				score.toString();
			} else {
				System.out.println("í•™ìƒì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
				return;
			}
		}
	}
	
	// ìˆœìœ„ì¡°íšŒ
	public void selectRank() {
		//code ì‘ì„± , í•©ê³„ë¥¼ ê¸°ì¤€ìœ¼ë¡œí•œ Comparator êµ¬í˜„
//		Collections.sort(studentList, new Comparator<Student>() {
//			@Override
//			public int compare(Student s1, Student s2) {
//				return s1.getScore().getSum().compareTo(s2.getScore().getSum());
//			}
//		});
		ì¶œì²˜: https://blue-boy.tistory.com/182 [ì½”ë”©ë°°ìš°ëŠ” í•™ìƒğŸŒ:í‹°ìŠ¤í† ë¦¬]

		for (Student student : studentList) {
			System.out.println(student.getName() + "_" + student.getStdNum() +
					" : í•©ê³„(" + student.getScore().getSum() + "), í‰ê· (" + student.getScore().getAvg() + ")");
		}
	}
}
